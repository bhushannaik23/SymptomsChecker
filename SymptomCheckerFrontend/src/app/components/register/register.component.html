<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card shadow">
        <div class="card-body p-4">
          <h3 class="text-center mb-4">Register</h3>
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div class="mb-3">
              <label class="form-label">Role</label>
              <select class="form-select" formControlName="role" (change)="onRoleChange()">
                <option value="patient">Patient</option>
                <option value="doctor">Doctor</option>
                <option value="admin">Admin</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Full Name</label>
              <input type="text" class="form-control" formControlName="name" />
            </div>
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" formControlName="email" />
            </div>
            <div class="mb-3">
              <label class="form-label">Password</label>
              <input type="password" class="form-control" formControlName="password" />
            </div>
            <div class="mb-3" *ngIf="selectedRole !== 'admin'">
              <label class="form-label">Phone</label>
              <input type="tel" class="form-control" formControlName="phone" />
            </div>
            <div class="mb-3" *ngIf="selectedRole === 'doctor'">
              <label class="form-label">Specialties (Select one or more)</label>
              <div class="specialty-checkboxes">
                <div *ngFor="let specialty of specialties" class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    [id]="'specialty-' + specialty.specialtyId"
                    [value]="specialty.specialtyId"
                    (change)="onSpecialtyChange(specialty.specialtyId, $event)"
                  />
                  <label class="form-check-label" [for]="'specialty-' + specialty.specialtyId">
                    {{ specialty.name }}
                  </label>
                </div>
              </div>
            </div>
            <button
              type="submit"
              class="btn btn-primary w-100"
              [disabled]="
                registerForm.invalid ||
                isLoading ||
                (selectedRole === 'doctor' && selectedSpecialties.length === 0)
              "
            >
              {{ isLoading ? 'Registering...' : 'Register' }}
            </button>
          </form>
          <div class="text-center mt-3">
            <a routerLink="/login">Already have an account? Login</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
